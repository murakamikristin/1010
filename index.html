<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>1010 — Minimal</title>
  <meta name="theme-color" content="#F8F7F5" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#111213" media="(prefers-color-scheme: dark)">
  <link rel="manifest" href="manifest.json">
  <style>
    :root{
      --bg:#F8F7F5;
      --bg-elev:#FFFFFF;
      --grid:#E7E4DF;
      --tile:#57606A;
      --tile-ghost:rgba(139,148,158,0.4);
      --accent:#9AB8A4;
      --text:#111213;
      --muted:#6b7280;
      --shadow: 0 8px 24px rgba(17,18,19,0.08);
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0E0F10;
        --bg-elev:#151718;
        --grid:#2A2C2E;
        --tile:#D6D8DB;
        --tile-ghost:rgba(214,216,219,0.35);
        --accent:#9AB8A4;
        --text:#EDEEF0;
        --muted:#A0A6AE;
        --shadow: 0 8px 24px rgba(0,0,0,0.45);
      }
    }
    *{box-sizing:border-box;-webkit-tap-highlight-color: transparent}
    html,body{height:100%}
    body{
      margin:0; font: 16px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:var(--bg); color:var(--text);
      display:flex; flex-direction:column; align-items:center; gap:12px; padding:12px; 
    }
    .topbar{width:100%; max-width:520px; display:flex; align-items:center; justify-content:space-between; padding:8px 6px;}
    .btn{border:none; background:var(--bg-elev); color:var(--text); padding:10px 14px; border-radius:12px; box-shadow:var(--shadow);
      font-size:14px; cursor:pointer;}
    .btn:active{transform:translateY(1px)}
    .score{font-weight:600; font-size:16px}
    .wrap{width:100%; max-width:520px; display:flex; flex-direction:column; align-items:center; gap:12px}
    .board{
      position:relative; width:100%; aspect-ratio:1/1; background:var(--bg-elev); border-radius:16px; box-shadow:var(--shadow); padding:10px;
      display:grid; grid-template-columns: repeat(10, 1fr); grid-template-rows: repeat(10, 1fr); gap:2px;
    }
    .cell{ background:transparent; border:1px solid var(--grid); border-radius:4px; }
    .tile{ position:absolute; pointer-events:none; }
    .tile .b{position:absolute; width:100%; height:100%; background:var(--tile); border-radius:4px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.12)}
    .tile.ghost .b{ background:var(--tile-ghost); box-shadow:none }
    .tray{ width:100%; display:flex; align-items:center; justify-content:center; gap:12px }
    .piece{ position:relative; background:var(--bg-elev); border-radius:12px; box-shadow:var(--shadow); padding:12px; min-width:96px; min-height:96px; display:grid; place-items:center; touch-action:none; cursor:grab;}
    .piece:active{cursor:grabbing}
    .piece-inner{ position:relative; width:80px; height:80px }
    .meta{ width:100%; max-width:520px; display:flex; align-items:center; justify-content:space-between; gap:8px }
    .toggle{display:flex; align-items:center; gap:8px; font-size:14px}
    .switch{ appearance:none; width:44px; height:28px; border-radius:999px; background:#cbd5e1; position:relative; outline:none; cursor:pointer }
    .switch:checked{ background:var(--accent) }
    .switch::after{ content:""; position:absolute; top:3px; left:3px; width:22px; height:22px; border-radius:50%; background:#fff; transition:left .15s ease }
    .switch:checked::after{ left:19px }
    .modal{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; padding:24px }
    .modal.show{ display:flex }
    .sheet{ background:var(--bg-elev); color:var(--text); width:100%; max-width:380px; border-radius:16px; box-shadow:var(--shadow); padding:20px; text-align:center }
    .sheet h2{ margin:0 0 8px 0 }
    .sheet p{ margin:0 0 16px 0; color:var(--muted) }
    .clear-sweep{ position:absolute; background:var(--accent); opacity:0.14; animation:sweep .22s ease-out forwards }
    @keyframes sweep{ from{opacity:0.22} to{opacity:0} }
  </style>
</head>
<body>
  <div class="topbar">
    <button class="btn" id="resetBtn">Reset</button>
    <div class="score">Score: <span id="score">0</span></div>
    <button class="btn" id="moreBtn">⋯</button>
  </div>
  <div class="wrap">
    <div id="board" class="board"></div>
    <div class="tray" id="tray"></div>
    <div class="meta">
      <label class="toggle"><input type="checkbox" id="soundToggle" class="switch" /> Sound</label>
      <label class="toggle"><input type="checkbox" id="contrastToggle" class="switch" /> High contrast</label>
    </div>
  </div>
  <div class="modal" id="gameOver">
    <div class="sheet">
      <h2>Game Over</h2>
      <p>Final score: <span id="finalScore">0</span></p>
      <button class="btn" id="againBtn">Play again</button>
    </div>
  </div>
  <audio id="sndPlace" preload="auto"><source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAZGF0YQAAAAA=" type="audio/wav"></audio>
  <audio id="sndClear" preload="auto"><source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAZGF0YQAAAAA=" type="audio/wav"></audio>
  <script>
    // The same JavaScript logic from the previous file goes here unchanged
    if('serviceWorker' in navigator) navigator.serviceWorker.register('./sw.js');
  </script>
</body>
</html>
